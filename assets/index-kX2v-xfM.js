import{b as f,j as s,Z as C,K as v}from"./index-zJlaE_HK.js";import{u as S,a as N,F as R,b as p,C as w,o as F,s as u,c as y,A as k}from"./useTimeOutMessage-BtCEFY5c.js";import{B as x}from"./Button-C6uDY6Lx.js";import{A as B}from"./ActionLink-01B6P8Z1.js";import"./FormContainer-4XNfbORA.js";import{P as h}from"./PasswordInput-Cyt4MxAT.js";import"./StatusIcon-BnPhkP8p.js";const M=F({newPassword:u().min(1,"Please enter your password"),confirmPassword:u().min(1,"Confirm Password Required")}).refine(e=>e.newPassword===e.confirmPassword,{message:"Your passwords do not match",path:["confirmPassword"]}),A=e=>{const[r,o]=f.useState(!1),{className:t,setMessage:i,setResetComplete:d,resetComplete:l,children:j}=e,{handleSubmit:g,formState:{errors:n},control:c}=S({resolver:N(M)}),b=async a=>{const{newPassword:P}=a;try{await C({password:P})&&(o(!1),d?.(!0))}catch(m){i?.(typeof m=="string"?m:"Failed to reset password"),o(!1)}o(!1)};return s.jsx("div",{className:t,children:l?s.jsx(s.Fragment,{children:j}):s.jsxs(R,{onSubmit:g(b),children:[s.jsx(p,{label:"Password",invalid:!!n.newPassword,errorMessage:n.newPassword?.message,children:s.jsx(w,{name:"newPassword",control:c,render:({field:a})=>s.jsx(h,{autoComplete:"off",placeholder:"••••••••••••",...a})})}),s.jsx(p,{label:"Confirm Password",invalid:!!n.confirmPassword,errorMessage:n.confirmPassword?.message,children:s.jsx(w,{name:"confirmPassword",control:c,render:({field:a})=>s.jsx(h,{autoComplete:"off",placeholder:"Confirm Password",...a})})}),s.jsx(x,{block:!0,loading:r,variant:"solid",type:"submit",children:r?"Submiting...":"Submit"})]})})},Y=({signInUrl:e="/sign-in"})=>{const[r,o]=f.useState(!1),[t,i]=y(),d=v(),l=()=>{d(e)};return s.jsxs("div",{children:[s.jsx("div",{className:"mb-6",children:r?s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"mb-1",children:"Reset done"}),s.jsx("p",{className:"font-semibold heading-text",children:"Your password has been successfully reset"})]}):s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"mb-1",children:"Set new password"}),s.jsx("p",{className:"font-semibold heading-text",children:"Your new password must different to previos password"})]})}),t&&s.jsx(k,{showIcon:!0,className:"mb-4",type:"danger",children:s.jsx("span",{className:"break-all",children:t})}),s.jsx(A,{resetComplete:r,setMessage:i,setResetComplete:o,children:s.jsx(x,{block:!0,variant:"solid",type:"button",onClick:l,children:"Continue"})}),s.jsxs("div",{className:"mt-4 text-center",children:[s.jsx("span",{children:"Back to "}),s.jsx(B,{to:e,className:"heading-text font-bold",themeColor:!1,children:"Sign in"})]})]})},Z=()=>s.jsx(Y,{});export{Y as ResetPasswordBase,Z as default};
