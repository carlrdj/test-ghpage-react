import{b as d,j as e,Y as b,K as f}from"./index-zJlaE_HK.js";import{u as S,a as v,F,b as y,C as N,o as w,s as C,c as k,A as P}from"./useTimeOutMessage-BtCEFY5c.js";import{B as h}from"./Button-C6uDY6Lx.js";import{A as E}from"./ActionLink-01B6P8Z1.js";import{I as B}from"./FormContainer-4XNfbORA.js";import"./StatusIcon-BnPhkP8p.js";const A=w({email:C().email().min(5)}),M=t=>{const[s,a]=d.useState(!1),{className:o,setMessage:r,setEmailSent:i,emailSent:n,children:u}=t,{handleSubmit:x,formState:{errors:c},control:g}=S({resolver:v(A)}),j=async l=>{const{email:p}=l;try{await b({email:p})&&(a(!1),i?.(!0))}catch(m){r?.(typeof m=="string"?m:"Some error occured!"),a(!1)}a(!1)};return e.jsx("div",{className:o,children:n?e.jsx(e.Fragment,{children:u}):e.jsxs(F,{onSubmit:x(j),children:[e.jsx(y,{label:"Email",invalid:!!c.email,errorMessage:c.email?.message,children:e.jsx(N,{name:"email",control:g,render:({field:l})=>e.jsx(B,{type:"email",placeholder:"Email",autoComplete:"off",...l})})}),e.jsx(h,{block:!0,loading:s,variant:"solid",type:"submit",children:s?"Submiting...":"Submit"})]})})},I=({signInUrl:t="/sign-in"})=>{const[s,a]=d.useState(!1),[o,r]=k(),i=f(),n=()=>{i(t)};return e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:s?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"mb-2",children:"Check your email"}),e.jsx("p",{className:"font-semibold heading-text",children:"We have sent a password recovery to your email"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"mb-2",children:"Forgot Password"}),e.jsx("p",{className:"font-semibold heading-text",children:"Please enter your email to receive a verification code"})]})}),o&&e.jsx(P,{showIcon:!0,className:"mb-4",type:"danger",children:e.jsx("span",{className:"break-all",children:o})}),e.jsx(M,{emailSent:s,setMessage:r,setEmailSent:a,children:e.jsx(h,{block:!0,variant:"solid",type:"button",onClick:n,children:"Continue"})}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("span",{children:"Back to "}),e.jsx(E,{to:t,className:"heading-text font-bold",themeColor:!1,children:"Sign in"})]})]})},Y=()=>e.jsx(I,{});export{I as ForgotPasswordBase,Y as default};
