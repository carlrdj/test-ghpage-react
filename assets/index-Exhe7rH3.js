import{b as M,X as y,j as e,K as B,u as P}from"./index-zJlaE_HK.js";import{u as E,a as A,F,b as r,C as l,o as R,s as n,c as U,A as D}from"./useTimeOutMessage-BtCEFY5c.js";import{I as t}from"./FormContainer-4XNfbORA.js";import{B as k}from"./Button-C6uDY6Lx.js";import"./Drawer-B_J86z6-.js";import"./toast-B7PgVsN2.js";import"./uniqueId-FWsYeQHm.js";import{S as L}from"./Select-BBW6A9hW.js";import{A as T}from"./ActionLink-01B6P8Z1.js";import"./StatusIcon-BnPhkP8p.js";const G=R({email:n({message:"Ingresar su correo electrónico"}),nombres:n({message:"Porfavor ingesar sus nombres completos"}),apellidos:n({message:"Porfavor ingresar sus apellidos completos"}),usuario:n({message:"Porfavor ingresar el nombre de usuario"}),rol:n({message:"Seleccione un rol para el usuario"}),fuente:n({message:"La fuente es obligatoria"}),password:n({message:"La contraseña es obligatoria"}),confirmPassword:n({message:"Debes confirmar tu contraseña"})}).refine(i=>i.password===i.confirmPassword,{message:"La contraseña no coincide",path:["confirmPassword"]}),K=i=>{const{disableSubmit:g=!1,className:c,setMessage:p}=i,d=[{label:"ADMIN",value:"ADMIN"},{label:"USER",value:"USER"}],[u,f]=M.useState(!1),{signUp:j}=y(),{handleSubmit:h,formState:{errors:a},control:o}=E({resolver:A(G)}),b=async s=>{const{nombres:m,apellidos:v,usuario:C,rol:S,fuente:w,password:N,email:I}=s;if(!g){f(!0);const x=await j({nombres:m,apellidos:v,usuario:C,rol:S,fuente:w,password:N,email:I});console.log(x),x?.status==="failed"&&p?.(x.message),f(!1)}};return e.jsx("div",{className:c,children:e.jsxs(F,{onSubmit:h(b),children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(r,{label:"Nombres",invalid:!!a.nombres,errorMessage:a.nombres?.message,children:e.jsx(l,{name:"nombres",control:o,render:({field:s})=>e.jsx(t,{type:"text",placeholder:"Ingresar nombres completos",autoComplete:"off",...s})})}),e.jsx(r,{label:"Apellidos",invalid:!!a.apellidos,errorMessage:a.apellidos?.message,children:e.jsx(l,{name:"apellidos",control:o,render:({field:s})=>e.jsx(t,{type:"text",placeholder:"Ingresar apellidos completos",autoComplete:"off",...s})})}),e.jsx(r,{label:"Nombre de usuario",invalid:!!a.usuario,errorMessage:a.usuario?.message,children:e.jsx(l,{name:"usuario",control:o,render:({field:s})=>e.jsx(t,{type:"text",placeholder:"Ingresar nombre de usuario",autoComplete:"off",...s})})}),e.jsx(r,{label:"Rol",invalid:!!a.rol,errorMessage:a.rol?.message,children:e.jsx(l,{name:"rol",control:o,render:({field:s})=>e.jsx(L,{placeholder:"Seleccione un rol",isClearable:!0,options:d,value:d.filter(m=>m.value===s.value),onChange:m=>s.onChange(m?.value)})})}),e.jsx(r,{label:"Fuente",invalid:!!a.fuente,errorMessage:a.fuente?.message,children:e.jsx(l,{name:"fuente",control:o,render:({field:s})=>e.jsx(t,{type:"text",placeholder:"Fuente",autoComplete:"off",...s})})}),e.jsx(r,{label:"Correo electrónico",invalid:!!a.email,errorMessage:a.email?.message,children:e.jsx(l,{name:"email",control:o,render:({field:s})=>e.jsx(t,{type:"email",placeholder:"Correo electrónico",autoComplete:"off",...s})})}),e.jsx(r,{label:"Contraseña",invalid:!!a.password,errorMessage:a.password?.message,children:e.jsx(l,{name:"password",control:o,render:({field:s})=>e.jsx(t,{type:"password",autoComplete:"off",placeholder:"Contraseña",...s})})}),e.jsx(r,{label:"Confirmar contraseña",invalid:!!a.confirmPassword,errorMessage:a.confirmPassword?.message,children:e.jsx(l,{name:"confirmPassword",control:o,render:({field:s})=>e.jsx(t,{type:"password",autoComplete:"off",placeholder:"Confirmar contraseña",...s})})})]}),e.jsx(k,{block:!0,loading:u,variant:"solid",type:"submit",children:u?"Creando cuenta...":"Registrarse"})]})})},O=({signInUrl:i="/sign-in",disableSubmit:g})=>{const[c,p]=U(),d=B();return P(u=>u.mode),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-center gap-5 mb-4",children:[e.jsx("img",{src:"/img/logo/logo-cenepred.jpg",alt:"CENEPRED",onClick:()=>d("/"),className:"h-24 md:h-24 w-auto object-contain cursor-pointer"}),e.jsx("img",{src:"/img/logo/logo_sigrid.png",alt:"SIGRID",className:"h-18",onClick:()=>window.location.href="https://sigrid.cenepred.gob.pe/sigridv3/"})]}),e.jsxs("div",{className:"mb-5 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#0097a7] mb-2",children:"Sistema CENEPRED"}),e.jsx("p",{className:"font-medium text-gray-600",children:"Ingrese sus datos para registrarse en el sistema."})]}),c&&e.jsx(D,{showIcon:!0,className:"mb-4",type:"danger",children:e.jsx("span",{className:"break-all",children:c})}),e.jsx(K,{disableSubmit:g,setMessage:p}),e.jsx("div",{children:e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("span",{children:"Ya tienes una cuenta? "}),e.jsx(T,{to:i,className:"heading-text font-bold",themeColor:!1,children:"Iniciar sesión"})]})})]})},Z=()=>e.jsx(O,{});export{O as SignUpBase,Z as default};
